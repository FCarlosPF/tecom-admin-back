(()=>{var e={};e.id=220,e.ids=[220],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},56221:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,pages:()=>d,routeModule:()=>x,tree:()=>c});var r=a(70260),s=a(28203),o=a(25155),i=a.n(o),n=a(67292),l={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);a.d(t,l);let c=["",{children:["panel",{children:["notificaciones",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,59533)),"C:\\Users\\Usuario\\Desktop\\dev\\tecom_admin_front\\src\\app\\panel\\notificaciones\\page.jsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,54045)),"C:\\Users\\Usuario\\Desktop\\dev\\tecom_admin_front\\src\\app\\panel\\layout.jsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,98180)),"C:\\Users\\Usuario\\Desktop\\dev\\tecom_admin_front\\src\\app\\layout.jsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,19937,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Users\\Usuario\\Desktop\\dev\\tecom_admin_front\\src\\app\\panel\\notificaciones\\page.jsx"],u={require:a,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:s.RouteKind.APP_PAGE,page:"/panel/notificaciones/page",pathname:"/panel/notificaciones",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},9005:(e,t,a)=>{Promise.resolve().then(a.bind(a,47647))},32973:(e,t,a)=>{Promise.resolve().then(a.bind(a,12307))},12307:(e,t,a)=>{"use strict";a.d(t,{default:()=>l});var r=a(45512),s=a(27582),o=a(64014),i=a(58009),n=a(44098);let l=()=>{let{notificaciones:e,setNotificaciones:t}=(0,o.A)(),[a,l]=(0,i.useState)(!1),[c,d]=(0,i.useState)({titulo:"",descripcion:"",fecha_evento:"",tipo:"",estado:"Activa",para:"Personalizado"}),[u,x]=(0,i.useState)(null),[m,p]=(0,i.useState)(!1),[f,h]=(0,i.useState)(""),[b,g]=(0,i.useState)([]),[v,y]=(0,i.useState)([]),[j,N]=(0,i.useState)([]),[_,w]=(0,i.useState)("Personalizado"),[E,k]=(0,i.useState)([]);(0,i.useEffect)(()=>{(async()=>{try{let e=await (0,s.bi)();console.log("Fetched notificaciones",e),Array.isArray(e)&&t(e)}catch(e){console.error("Error fetching data:",e)}})()},[]),(0,i.useEffect)(()=>{(async()=>{try{if("\xc1rea"===_){let e=await (0,s.j8)();g(e)}else if("Rol"===_){let e=await (0,s.O0)();y(e)}else if("Empleado"===_){let e=await (0,s.T8)();N(e)}}catch(e){console.error("Error fetching para data:",e)}})()},[_]);let A=async e=>{if(confirm("\xbfEst\xe1s seguro de que deseas eliminar esta notificaci\xf3n?"))try{await (0,s.WT)(e);let a=await (0,s.bi)();Array.isArray(a)&&t(a),h("Notificaci\xf3n eliminada exitosamente")}catch(e){console.error("Error al eliminar la notificaci\xf3n:",e),h("Error al eliminar la notificaci\xf3n")}},C=async()=>{try{let e=m?u:c,a=await (m?(0,s.sH)(e.id_notificacion,e):(0,s.mA)(e));if(console.log("Respuesta del servidor:",a),a.id_notificacion){e=a;let r=await (0,s.bi)();if(Array.isArray(r)&&t(r),!m){let t="Todos"===_?{}:{area_id:"\xc1rea"===_?E:null,rol_id:"Rol"===_?E:null,empleados_ids:"Empleado"===_?E:[]};console.log("Notificaci\xf3n Data:",t);try{if(e.id_notificacion){console.log("Enviando notificaci\xf3n con ID:",e.id_notificacion);let a=await (0,s.SG)(e.id_notificacion,t);console.log("Respuesta de enviarNotificacion:",a)}else console.error("ID de notificaci\xf3n no definido")}catch(e){console.error("Error al enviar la notificaci\xf3n:",e)}}l(!1),d({titulo:"",descripcion:"",fecha_evento:"",tipo:"",estado:"Activa",para:"Personalizado"}),x(null),p(!1),h(m?"Notificaci\xf3n actualizada exitosamente":"Notificaci\xf3n agregada y enviada exitosamente")}else throw console.error("Error en la respuesta del servidor:",a),Error("Error en la respuesta del servidor")}catch(e){console.error("Error al procesar la notificaci\xf3n:",e),h("Error al procesar la notificaci\xf3n")}},P=e=>{x(e),p(!0),l(!0)};return(0,r.jsxs)("div",{className:"p-6 bg-white shadow-lg rounded-lg",children:[(0,r.jsx)("h2",{className:"text-2xl font-semibold mb-4 text-gray-800",children:"Gesti\xf3n de Notificaciones"}),(0,r.jsxs)("button",{className:"bg-green-600 text-white px-6 py-3 rounded-lg mb-6 flex items-center hover:bg-green-700 transition",onClick:()=>{d({titulo:"",descripcion:"",fecha_evento:"",tipo:"",estado:"Activa",para:"Personalizado"}),p(!1),l(!0)},children:[(0,r.jsx)(n.OiG,{className:"mr-3"}),"Agregar Notificaci\xf3n"]}),f&&(0,r.jsx)("div",{className:"mb-6 p-4 bg-green-100 text-green-700 rounded-lg shadow-sm",children:f}),(0,r.jsxs)("table",{className:"table-auto w-full border border-gray-300 rounded-lg",children:[(0,r.jsx)("thead",{className:"bg-gray-100",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 border-b text-left text-sm font-medium text-gray-600",children:"T\xedtulo"}),(0,r.jsx)("th",{className:"px-6 py-3 border-b text-left text-sm font-medium text-gray-600",children:"Descripci\xf3n"}),(0,r.jsx)("th",{className:"px-6 py-3 border-b text-left text-sm font-medium text-gray-600",children:"Fecha de Evento"}),(0,r.jsx)("th",{className:"px-6 py-3 border-b text-left text-sm font-medium text-gray-600",children:"Tipo"}),(0,r.jsx)("th",{className:"px-6 py-3 border-b text-left text-sm font-medium text-gray-600",children:"Estado"}),(0,r.jsx)("th",{className:"px-6 py-3 border-b text-left text-sm font-medium text-gray-600",children:"Para"}),(0,r.jsx)("th",{className:"px-6 py-3 border-b text-left text-sm font-medium text-gray-600",children:"Acciones"})]})}),(0,r.jsx)("tbody",{children:Array.isArray(e)&&e.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50 transition duration-200",children:[(0,r.jsx)("td",{className:"px-6 py-4 border-b text-sm text-gray-700",children:e.titulo}),(0,r.jsx)("td",{className:"px-6 py-4 border-b text-sm text-gray-700",children:e.descripcion}),(0,r.jsx)("td",{className:"px-6 py-4 border-b text-sm text-gray-700",children:e.fecha_evento}),(0,r.jsx)("td",{className:"px-6 py-4 border-b text-sm text-gray-700",children:e.tipo}),(0,r.jsx)("td",{className:"px-6 py-4 border-b text-sm text-gray-700",children:e.estado}),(0,r.jsx)("td",{className:"px-6 py-4 border-b text-sm text-gray-700",children:e.para}),(0,r.jsx)("td",{className:"px-6 py-4 border-b text-sm text-gray-700",children:(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)("button",{className:"text-blue-600 hover:text-blue-800 transition",onClick:()=>P(e),children:(0,r.jsx)(n.uO9,{})}),(0,r.jsx)("button",{className:"text-red-600 hover:text-red-800 transition",onClick:()=>A(e.id_notificacion),children:(0,r.jsx)(n.qbC,{})})]})})]},e.id_notificacion))})]}),a&&(0,r.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex justify-center items-center",children:(0,r.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-xl w-3/4 md:w-1/3",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-semibold text-gray-800",children:m?"Editar Notificaci\xf3n":"Agregar Nueva Notificaci\xf3n"}),(0,r.jsx)("button",{onClick:()=>l(!1),children:(0,r.jsx)(n.QCr,{className:"text-gray-600 hover:text-gray-800"})})]}),[{label:"T\xedtulo",value:m?u.titulo:c.titulo,key:"titulo"},{label:"Descripci\xf3n",value:m?u.descripcion:c.descripcion,key:"descripcion"},{label:"Fecha de Evento",value:m?u.fecha_evento:c.fecha_evento,key:"fecha_evento",type:"datetime-local"},{label:"Tipo",value:m?u.tipo:c.tipo,key:"tipo"}].map(({label:e,value:t,key:a,type:s="text"})=>(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("label",{className:"block text-gray-700 text-sm font-medium mb-2",children:e}),(0,r.jsx)("input",{type:s,className:"shadow-sm border rounded w-full py-3 px-4 text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500",value:t,onChange:e=>{let t=m?{...u,[a]:e.target.value}:{...c,[a]:e.target.value};m?x(t):d(t)}})]},a)),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("label",{className:"block text-gray-700 text-sm font-medium mb-2",children:"Estado"}),(0,r.jsxs)("select",{className:"shadow-sm border rounded w-full py-3 px-4 text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500",value:m?u.estado:c.estado,onChange:e=>{let t=m?{...u,estado:e.target.value}:{...c,estado:e.target.value};m?x(t):d(t)},children:[(0,r.jsx)("option",{value:"Activa",children:"Activa"}),(0,r.jsx)("option",{value:"Inactiva",children:"Inactiva"})]})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("label",{className:"block text-gray-700 text-sm font-medium mb-2",children:"Para"}),(0,r.jsxs)("select",{className:"shadow-sm border rounded w-full py-3 px-4 text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500",value:m?u.para:c.para,onChange:e=>{let t=m?{...u,para:e.target.value}:{...c,para:e.target.value};m?x(t):d(t),w(e.target.value)},children:[(0,r.jsx)("option",{value:"",children:"Seleccione una Opci\xf3n"}),(0,r.jsx)("option",{value:"\xc1rea",children:"\xc1rea"}),(0,r.jsx)("option",{value:"Rol",children:"Rol"}),(0,r.jsx)("option",{value:"Empleado",children:"Empleado"}),(0,r.jsx)("option",{value:"Todos",children:"Todos"})," "]})]}),"\xc1rea"===_&&(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("label",{className:"block text-gray-700 text-sm font-medium mb-2",children:"Seleccionar \xc1rea"}),(0,r.jsxs)("select",{className:"shadow-sm border rounded w-full py-3 px-4 text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500",onChange:e=>{let t=e.target.value;console.log("Selected Area ID:",t),k(t)},children:[(0,r.jsx)("option",{value:"",children:"Seleccione un \xe1rea"}),b.map(e=>(0,r.jsx)("option",{value:e.area_id,children:e.nombre},e.area_id))]})]}),"Rol"===_&&(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("label",{className:"block text-gray-700 text-sm font-medium mb-2",children:"Seleccionar Rol"}),(0,r.jsx)("select",{className:"shadow-sm border rounded w-full py-3 px-4 text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500",onChange:e=>{let t=e.target.value;console.log("Selected Rol ID:",t),k(t)},children:v.map(e=>(0,r.jsx)("option",{value:e.id_rol,children:e.nombre},e.id_rol))})]}),"Empleado"===_&&(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("label",{className:"block text-gray-700 text-sm font-medium mb-2",children:"Seleccionar Empleados"}),(0,r.jsx)("select",{multiple:!0,className:"shadow-sm border rounded w-full py-3 px-4 text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500",onChange:e=>k(Array.from(e.target.selectedOptions,e=>e.value)),children:j.map(e=>(0,r.jsx)("option",{value:e.id_empleado,children:e.nombre},e.id_empleado))})]}),(0,r.jsxs)("div",{className:"flex justify-end",children:[(0,r.jsx)("button",{className:"bg-blue-600 text-white px-6 py-3 rounded-lg mr-3 hover:bg-blue-700 transition",onClick:C,children:m?"Actualizar":"Agregar y Enviar"}),(0,r.jsx)("button",{className:"bg-gray-500 text-white px-6 py-3 rounded-lg hover:bg-gray-600 transition",onClick:()=>l(!1),children:"Cancelar"})]})]})})]})}},59533:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var r=a(62740),s=a(47647);a(76301);let o=()=>(0,r.jsx)(s.default,{})},47647:(e,t,a)=>{"use strict";a.d(t,{default:()=>r});let r=(0,a(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\Usuario\\\\Desktop\\\\dev\\\\tecom_admin_front\\\\src\\\\components\\\\Notificaciones.jsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\Usuario\\Desktop\\dev\\tecom_admin_front\\src\\components\\Notificaciones.jsx","default")}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[112,175,900,264,473],()=>a(56221));module.exports=r})();