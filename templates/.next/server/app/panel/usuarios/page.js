(()=>{var e={};e.id=757,e.ids=[757],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},22319:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>o.a,__next_app__:()=>m,pages:()=>c,routeModule:()=>x,tree:()=>d});var s=a(70260),r=a(28203),l=a(25155),o=a.n(l),n=a(67292),i={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>n[e]);a.d(t,i);let d=["",{children:["panel",{children:["usuarios",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,26248)),"C:\\Users\\Usuario\\Desktop\\dev\\tecom_admin_front\\src\\app\\panel\\usuarios\\page.jsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,54045)),"C:\\Users\\Usuario\\Desktop\\dev\\tecom_admin_front\\src\\app\\panel\\layout.jsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,98180)),"C:\\Users\\Usuario\\Desktop\\dev\\tecom_admin_front\\src\\app\\layout.jsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,19937,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\Usuario\\Desktop\\dev\\tecom_admin_front\\src\\app\\panel\\usuarios\\page.jsx"],m={require:a,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/panel/usuarios/page",pathname:"/panel/usuarios",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},44008:(e,t,a)=>{Promise.resolve().then(a.bind(a,18765))},91208:(e,t,a)=>{Promise.resolve().then(a.bind(a,10806))},10806:(e,t,a)=>{"use strict";a.d(t,{default:()=>c});var s=a(45512),r=a(58009),l=a(44098),o=a(27582);let n=({isEditing:e,empleado:t,setEmpleado:a,onClose:o,onSave:n,areas:i})=>{let d=(e,t)=>{if(e.includes(".")){let s=e.split(".");a(e=>({...e,[s[0]]:{...e[s[0]],[s[1]]:t}}))}else a(a=>({...a,[e]:t}))};return(0,r.useEffect)(()=>{e&&t&&a(t)},[e,t,a]),(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-end items-start",onClick:o,children:(0,s.jsxs)("div",{className:"bg-gray-200 p-6 rounded-r-lg shadow-2xl w-full md:w-1/3 lg:w-1/4 h-full overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold text-gray-800",children:e?"Editar Empleado":"Agregar Nuevo Empleado"}),(0,s.jsx)("button",{onClick:o,children:(0,s.jsx)(l.QCr,{className:"text-gray-600 hover:text-gray-800"})})]}),[{label:"Nombre",key:"user.first_name"},{label:"Correo",key:"user.email",type:"email"},{label:"Apellidos",key:"user.last_name"},{label:"Especialidad",key:"especialidad"},{label:"Sueldo",key:"sueldo",type:"number"},{label:"Nombre de Usuario",key:"user.username"},{label:"Contrase\xf1a",key:"user.password",type:"password"},{label:"Fecha de contrataci\xf3n",key:"fecha_contratacion",type:"date"}].map(({label:e,key:a,type:r="text"})=>(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-gray-700",children:e}),(0,s.jsx)("input",{type:r,className:"w-full p-2 border rounded shadow-inner",value:a.includes(".")?t[a.split(".")[0]][a.split(".")[1]]:t[a]??"",onChange:e=>d(a,e.target.value)})]},a)),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-gray-700",children:"\xc1rea"}),(0,s.jsxs)("select",{className:"w-full p-2 border rounded shadow-inner",value:t.area??"",onChange:e=>d("area",parseInt(e.target.value,10)),children:[(0,s.jsx)("option",{value:"",children:"Seleccione un \xe1rea"}),i.map(e=>(0,s.jsx)("option",{value:e.area_id,children:e.nombre},e.area_id))]})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-gray-700",children:"Estado"}),(0,s.jsxs)("select",{className:"w-full p-2 border rounded shadow-inner",value:t.activo??"",onChange:e=>d("activo","true"===e.target.value),children:[(0,s.jsx)("option",{value:"true",children:"Activo"}),(0,s.jsx)("option",{value:"false",children:"Inactivo"})]})]}),(0,s.jsxs)("div",{className:"flex gap-4 justify-end",children:[(0,s.jsx)("button",{className:"px-4 py-2 bg-gray-200 rounded-md shadow-lg hover:shadow-xl transition",onClick:o,children:"Cancelar"}),(0,s.jsx)("button",{className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-md shadow-lg hover:shadow-xl transition",onClick:n,children:e?"Actualizar":"Agregar"})]})]})})},i=({empleados:e,onEdit:t,onDelete:a,areas:r})=>{let o=e=>{let t=r.find(t=>t.area_id===e);return t?t.nombre:"Sin \xe1rea"};return(0,s.jsxs)("table",{className:"w-full rounded-lg",children:[(0,s.jsx)("thead",{className:"bg-gray-800",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-4 py-3 text-left text-sm text-white font-bold",children:"Nombre"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-sm text-white font-bold",children:"Apellidos"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-sm text-white font-bold",children:"Correo"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-sm text-white font-bold",children:"Especialidad"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-sm text-white font-bold",children:"Sueldo"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-sm text-white font-bold",children:"Estado"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-sm text-white font-bold",children:"Fecha de contrataci\xf3n"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-sm text-white font-bold",children:"\xc1rea"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-sm text-white font-bold",children:"Acciones"})]})}),(0,s.jsx)("tbody",{children:Array.isArray(e)&&e.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-700 transition",children:[(0,s.jsx)("td",{className:"px-4 py-3 text-sm text-gray-100",children:e.user?.first_name}),(0,s.jsx)("td",{className:"px-4 py-3 text-sm text-gray-100",children:e.user?.last_name}),(0,s.jsx)("td",{className:"px-4 py-3 text-sm text-gray-100",children:e.user?.email}),(0,s.jsx)("td",{className:"px-4 py-3 text-sm text-gray-100",children:e.especialidad}),(0,s.jsx)("td",{className:"px-4 py-3 text-sm text-gray-100",children:e.sueldo}),(0,s.jsx)("td",{className:"px-4 py-3 text-sm text-gray-100",children:(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsx)("div",{className:`inline-flex items-center justify-center w-16 h-5 rounded-full text-white ${e.activo?"bg-green-500":"bg-red-500"}`,children:(0,s.jsx)("strong",{children:e.activo?"Activo":"Inactivo"})})})}),(0,s.jsx)("td",{className:"px-4 py-3 text-sm text-gray-100",children:e.fecha_contratacion}),(0,s.jsx)("td",{className:"px-4 py-3 text-sm text-gray-100",children:o(e.area?.area_id)}),(0,s.jsx)("td",{className:"px-4 py-3 text-sm text-gray-100",children:(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("button",{className:"text-blue-500 hover:text-blue-700 transition",onClick:()=>t(e),children:(0,s.jsx)(l.uO9,{})}),(0,s.jsx)("button",{className:"text-red-500 hover:text-red-700 transition",onClick:()=>a(e.id_empleado),children:(0,s.jsx)(l.qbC,{})})]})})]},e.id_empleado))})]})};var d=a(64014);let c=()=>{let{usuarioLogeado:e}=(0,d.A)(),[t,a]=(0,r.useState)([]),[c,m]=(0,r.useState)([]),[x,u]=(0,r.useState)(!1),[p,h]=(0,r.useState)(!0),[f,g]=(0,r.useState)({user:{email:"",first_name:"",last_name:"",username:"",password:""},especialidad:"",sueldo:null,activo:null,fecha_contratacion:null}),[y,b]=(0,r.useState)(null),[j,v]=(0,r.useState)(!1),[N,_]=(0,r.useState)(""),w=async()=>{if(!e){console.error("usuarioLogeado no est\xe1 definido"),h(!1);return}if(null===e.id_empleado){console.log("id_empleado es null, no se ejecuta fetchEmpleados"),h(!1);return}try{let t;console.log("Estado de usuarioLogeado al iniciar fetchEmpleados:",e),1===e.rol?(console.log("Usuario con rol 1, obteniendo todos los empleados"),t=await (0,o.T8)(),a(t)):console.log("Usuario con rol diferente a 1, no se obtienen empleados")}catch(e){console.error("Error al obtener los empleados:",e.message,e.stack)}finally{h(!1)}},E=async()=>{try{let e=await (0,o.j8)();m(e)}catch(e){console.error("Error al obtener las \xe1reas:",e)}};(0,r.useEffect)(()=>{e?(w(),E()):console.log("usuarioLogeado no est\xe1 definido, no se ejecuta fetchEmpleados")},[e]);let k=async e=>{if(confirm("\xbfEst\xe1s seguro de que deseas eliminar este usuario?"))try{await (0,o.tn)(e),a(t=>t.filter(t=>t.id_empleado!==e)),_("Empleado eliminado exitosamente")}catch(e){console.error("Error al eliminar el empleado:",e),_("Error al eliminar el empleado")}},C=async()=>{try{console.log("Nuevo Empleado:",f);let e=await (0,o.hc)(f);a(t=>[...t,e]),u(!1),g({user:{email:"",first_name:"",last_name:""},especialidad:"",sueldo:null,activo:null,fecha_contratacion:null,username:"",password:""}),_("Empleado agregado exitosamente")}catch(e){console.error("Error al agregar el empleado:",e),_("Error al agregar el empleado")}},A=async()=>{try{console.log("Empleado Editado:",y),await (0,o.$n)(y.id_empleado,y),a(e=>e.map(e=>e.id_empleado===y.id_empleado?{...e,...y}:e)),u(!1),b(null),v(!1),_("Empleado actualizado exitosamente")}catch(e){console.error("Error al actualizar el empleado:",e),_("Error al actualizar el empleado")}};return p?(0,s.jsx)("div",{children:"Cargando..."}):(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold text-black",children:"Gesti\xf3n de Empleados"}),(0,s.jsx)("button",{className:"p-2 bg-gray-800 text-white rounded-full shadow-lg flex items-center hover:shadow-xl transition",onClick:()=>{g({user:{email:"",first_name:"",last_name:""},especialidad:"",sueldo:null,activo:null,fecha_contratacion:null}),v(!1),u(!0)},children:(0,s.jsx)(l.OiG,{})})]}),(0,s.jsxs)("div",{className:"bg-gray-800 shadow-lg rounded-lg p-6",children:[N&&(0,s.jsx)("div",{className:"mb-6 p-4 bg-green-100 text-green-700 rounded-lg shadow-sm",children:N}),e&&(1===e.rol||2===e.rol)?(0,s.jsx)(i,{empleados:t,onEdit:e=>{b(e),v(!0),u(!0)},onDelete:k,areas:c}):(0,s.jsx)("div",{className:"text-white",children:"No tienes permiso para ver esta informaci\xf3n"}),x&&(0,s.jsx)(n,{isEditing:j,empleado:j?y:f,setEmpleado:j?b:g,onClose:()=>u(!1),onSave:j?A:C,areas:c})]})]})}},26248:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var s=a(62740),r=a(18765);a(76301);let l=()=>(0,s.jsx)(r.default,{})},18765:(e,t,a)=>{"use strict";a.d(t,{default:()=>s});let s=(0,a(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\Usuario\\\\Desktop\\\\dev\\\\tecom_admin_front\\\\src\\\\components\\\\empleados\\\\usuarios.jsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\Usuario\\Desktop\\dev\\tecom_admin_front\\src\\components\\empleados\\usuarios.jsx","default")}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[112,175,900,264,473],()=>a(22319));module.exports=s})();