(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[150],{22653:(e,r,s)=>{Promise.resolve().then(s.bind(s,24329))},24329:(e,r,s)=>{"use strict";s.d(r,{default:()=>c});var t=s(95155),a=s(12115),l=s(11536),o=s(41938),i=s(57798),n=s(91068);let c=()=>{var e;let[r,s]=(0,a.useState)([]),[c,d]=(0,a.useState)(!0),[u,x]=(0,a.useState)(!1),[m,b]=(0,a.useState)({nombre:"",supervisor:""}),[h,p]=(0,a.useState)(null),[g,v]=(0,a.useState)(!1),{empleados:j}=(0,o.A)();(0,a.useEffect)(()=>{(async()=>{try{let e=await (0,i.j8)();s(e)}catch(e){console.error("Error al obtener las \xe1reas:",e)}finally{d(!1)}})()},[]);let f=async e=>{try{await (0,i.X6)(e),s(r=>r.filter(r=>r.area_id!==e)),n.oR.success("\xc1rea eliminada correctamente")}catch(e){console.error("Error al eliminar el \xe1rea:",e),n.oR.error("Error al eliminar el \xe1rea")}},y=async()=>{try{let e={...m,supervisor:m.supervisor||null};await (0,i.Xn)(e);let r=await (0,i.j8)();s(r),x(!1),b({nombre:"",supervisor:""}),n.oR.success("\xc1rea agregada exitosamente")}catch(e){console.error("Error al agregar el \xe1rea:",e),n.oR.error("Error al agregar el \xe1rea")}},N=async()=>{try{let e={...h,supervisor:h.supervisor?h.supervisor.id_empleado:null};await (0,i.BE)(e.area_id,e);let r=await (0,i.j8)();s(r),x(!1),p(null),v(!1),n.oR.success("\xc1rea actualizada exitosamente")}catch(e){console.error("Error al actualizar el \xe1rea:",e),n.oR.error("Error al actualizar el \xe1rea")}},w=e=>{p(e),v(!0),x(!0)};return c?(0,t.jsx)("div",{className:"flex justify-center items-center h-64",children:"Cargando..."}):(0,t.jsxs)("div",{className:"p-6 bg-gray-100 min-h-screen",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,t.jsx)("h2",{className:"text-2xl font-semibold text-gray-800",children:"Gesti\xf3n de \xc1reas"}),(0,t.jsx)("button",{className:"p-2 bg-gray-800 text-white rounded-full shadow-lg flex items-center hover:shadow-xl transition",onClick:()=>{b({nombre:"",supervisor:""}),v(!1),x(!0)},children:(0,t.jsx)(l.OiG,{})})]}),(0,t.jsx)("div",{className:"bg-gray-900 p-6 rounded-lg",children:(0,t.jsxs)("table",{className:"w-full rounded-lg",children:[(0,t.jsx)("thead",{className:"bg-gray-800",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-4 py-3 text-left text-sm text-white font-bold",children:"Nombre"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-sm text-white font-bold",children:"Supervisor"}),(0,t.jsx)("th",{className:"px-4 py-3 text-center text-sm text-white font-bold",children:"Acciones"})]})}),(0,t.jsx)("tbody",{children:r.map(e=>(0,t.jsxs)("tr",{className:"hover:bg-gray-700 transition",children:[(0,t.jsx)("td",{className:"px-4 py-3 text-sm text-gray-100",children:e.nombre}),(0,t.jsx)("td",{className:"px-4 py-3 text-sm text-gray-100",children:e.supervisor?"".concat(e.supervisor.nombre," ").concat(e.supervisor.apellidos):"Sin supervisor"}),(0,t.jsx)("td",{className:"px-4 py-3 text-sm text-gray-100 text-center",children:(0,t.jsxs)("div",{className:"flex justify-center gap-2",children:[(0,t.jsx)("button",{className:"text-blue-500 hover:text-blue-700 transition",onClick:()=>w(e),children:(0,t.jsx)(l.uO9,{})}),(0,t.jsx)("button",{className:"text-red-500 hover:text-red-700 transition",onClick:()=>f(e.area_id),children:(0,t.jsx)(l.qbC,{})})]})})]},e.area_id))})]})})]}),u&&(0,t.jsx)("div",{className:"fixed inset-0 bg-gray-700 bg-opacity-75 flex justify-center items-center z-50",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-lg w-1/3 p-6 relative",children:[(0,t.jsx)("button",{className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700",onClick:()=>x(!1),children:(0,t.jsx)(l.QCr,{})}),(0,t.jsx)("h2",{className:"text-xl font-bold mb-4",children:g?"Editar \xc1rea":"Agregar Nueva \xc1rea"}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"block text-gray-700 font-semibold mb-2",children:"Nombre"}),(0,t.jsx)("input",{type:"text",className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring focus:ring-blue-300",value:g?h.nombre:m.nombre,onChange:e=>g?p({...h,nombre:e.target.value}):b({...m,nombre:e.target.value})})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"block text-gray-700 font-semibold mb-2",children:"Supervisor"}),(0,t.jsxs)("select",{className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring focus:ring-blue-300",value:g?(null===(e=h.supervisor)||void 0===e?void 0:e.id_empleado)||"":m.supervisor,onChange:e=>g?p({...h,supervisor:e.target.value?{id_empleado:e.target.value}:null}):b({...m,supervisor:e.target.value||null}),children:[(0,t.jsx)("option",{value:"",children:"Seleccione un supervisor"}),j.map(e=>(0,t.jsx)("option",{value:e.id_empleado,children:e.nombre},e.id_empleado))]})]}),(0,t.jsxs)("div",{className:"flex justify-end",children:[(0,t.jsx)("button",{className:"bg-blue-500 text-white px-4 py-2 rounded mr-2 hover:bg-blue-600 transition",onClick:g?N:y,children:g?"Actualizar":"Agregar"}),(0,t.jsx)("button",{className:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600 transition",onClick:()=>x(!1),children:"Cancelar"})]})]})})]})}},41938:(e,r,s)=>{"use strict";s.d(r,{A:()=>t});let t=(0,s(99827).v)(e=>({usuarioLogeado:{id_empleado:null,nombre:"",apellidos:"",correo:"",especialidad:"",sueldo:"",activo:!1,foto:"",nombre_usuario:"",fecha_contratacion:"",area:null,rol:null},empleados:[],tareas:[],asignacionesTareas:[],proyectos:[],notificaciones:[],setUsuarioLogeado:r=>e({usuarioLogeado:r}),setEmpleados:r=>e({empleados:r}),setTareas:r=>e({tareas:r}),setAsignacionesTareas:r=>e({asignacionesTareas:r}),setProyectos:r=>e({proyectos:r}),setNotificaciones:r=>e({notificaciones:r})}))},99827:(e,r,s)=>{"use strict";s.d(r,{v:()=>n});var t=s(12115);let a=e=>{let r;let s=new Set,t=(e,t)=>{let a="function"==typeof e?e(r):e;if(!Object.is(a,r)){let e=r;r=(null!=t?t:"object"!=typeof a||null===a)?a:Object.assign({},r,a),s.forEach(s=>s(r,e))}},a=()=>r,l={setState:t,getState:a,getInitialState:()=>o,subscribe:e=>(s.add(e),()=>s.delete(e))},o=r=e(t,a,l);return l},l=e=>e?a(e):a,o=e=>e,i=e=>{let r=l(e),s=e=>(function(e,r=o){let s=t.useSyncExternalStore(e.subscribe,()=>r(e.getState()),()=>r(e.getInitialState()));return t.useDebugValue(s),s})(r,e);return Object.assign(s,r),s},n=e=>e?i(e):i}},e=>{var r=r=>e(e.s=r);e.O(0,[711,466,798,441,517,358],()=>r(22653)),_N_E=e.O()}]);